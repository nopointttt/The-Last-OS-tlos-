# Social & Identity: Web of Trust

Этот документ определяет, как обитатели **The Last OS** взаимодействуют друг с другом, устанавливают доверие и делят общее пространство без центрального сервера.

---

## 1. Nostr Identity: Твой суверенный паспорт

В tLOS нет "регистрации". Твой аккаунт — это пара криптографических ключей.

-   **npub (Nostr Public Key)**: Твой публичный адрес и юзернейм. Он неизменен и принадлежит только тебе.
-   **nsec (Nostr Secret Key)**: Твой цифровой "ключ от жизни". Хранится локально в Shell (или на аппаратном кошельке). С его помощью ты подписываешь всё: от постов до команд управления Grid.
-   **NIP-05 (Discovery)**: Привязка `npub` к DNS-имени (например, `satoshi@thelastos.org`) для удобного поиска.
-   **Local-First Persistence (Kind 30078)**: Состояние вашего рабочего пространства (окна, настройки, метаданные) сохраняется как подписанные Nostr-события (Kind 30078) на релеях, обеспечивая мгновенную синхронизацию между вашими устройствами.

---

## 2. Web of Trust: Дружба через криптографию

Вместо центральной базы друзей tLOS использует децентрализованный граф доверия.

### 2.1. Cryptographic Friendship
"Дружба" в системе — это **Verifiable Credential (VC)**.
-   Когда вы добавляете друга, вы обмениваетесь аттестациями.
-   **Triangle of Trust**: Если А доверяет Б, а Б доверяет В, то А может видеть "дистанцию доверия" до В.

### 2.2. Social Distance Visualization
На Infinite Canvas дистанция между объектами может зависеть от уровня доверия.
-   **Proximity Patterns**: Друзья отображаются в ярком "ближнем круге". "Друзья друзей" — в полупрозрачном слое.
-   **Force-Directed Graph**: OS визуализирует ваш социальный граф как живое созвездие, где связи притягивают или отталкивают акторов.
-   **Base Visits**: Вы можете перемещаться по карте, чтобы посетить "Базы" и публичные галереи друзей. Социальное взаимодействие становится пространственным путешествием.

---

## 3. Collaborative Spaces: Multipayer Mode

tLOS позволяет превратить часть вашего личного пространства в общий холст.

### 3.1. Ephemeral Handshake
Для мгновенного соединения используется **Nostr Ephemeral Events (kind 20000+)**.
1.  Вы отправляете запрос на "Multipayer" через Nostr DM.
2.  Обмениваетесь координатами `(x, y)` и секретом для WebRTC/CRDT.
3.  Соединение устанавливается P2P. Никаких серверов посередине.

### 3.2. Spatial ACLs (Access Control)
-   **Fog of War**: Часть вашей карты скрыта от гостя "туманом войны". Вы явно выбираете сегменты Canvas для шаринга.
-   **Shared Cursors**: Вы видите курсоры и действия друзей в реальном времени (на базе **CRDT/Yjs**).

---

## 4. The Sovereign Proxy: Bridging Web2
tLOS не подключается к Web2 напрямую; он **оборачивает** его.
-   **Sovereign Actors**: Специальные Wasm-акторы в вашем Lattice взаимодействуют с API (X, Discord) от вашего имени.
-   **Identity Wrapping**: Ваша Nostr-личность (`npub`) служит ключом к "сейфу" (Vault), где хранятся API-токены Web2 сервисов.
-   **Nostr Aggregation**: Мосты (Bridges) превращают ленты из Web2 в поток Nostr-событий, позволяя читать все соцсети в едином суверенном интерфейсе.

---

## 4. Reputation & Sybil Resistance

Как защитить систему от ботов (Sybil Attacks).

### 4.1. Human Passport
Интеграция с **Gitcoin Passport / Human Passport**.
-   Сбор "штампов" (Stamps) за владение доменом, активность на GitHub, биометрию.
-   **Unique Humanity Score**: Чем выше ваш счет, тем больше прав в системе.

### 4.2. Reputation-Weighted Resource Scheduling
Доступ к ресурсам "Grid" (CPU/Memory) зависит от репутации:
```text
Compute_Quota = Baseline_CU + (Trust_Score * Multiplier)
```
Новички получают базовый ресурс. Ветераны с высокой репутацией могут запускать "тяжелых" AI-агентов.
