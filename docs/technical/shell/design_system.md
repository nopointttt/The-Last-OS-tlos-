# Component Library: The Liquid Glass Design System

Этот документ описывает принципы проектирования и библиотеку компонентов **The Last OS (tLOS)**. Система базируется на концепции **Liquid Glass** (Пространственный интерфейс без экранов) и оптимизирована для AI-агентов.

---

## 1. Архитектурная модель: Spatial-C4 (Frontend)
Мы применяем модель **C4** для структурирования UI-системы:

- **Level 1 (Context)**: Взаимодействие Суверена с пространственными приложениями (Spatial Apps).
- **Level 2 (Container)**: Storybook как живая документация и реестр компонентов.
- **Level 3 (Component)**: Анатомия UI-компонента (Logic, Style, Wit-Interface).
- **Level 4 (Code)**: Реализация на Rust-Wasm и SolidJS (JSX).

---

## 2. Принципы Spatial UI: Liquid Glass
tLOS следует стандартам пространственного дизайна 2026 года:

### 2.1. Иерархия Глубины (Depth Hierarchy)
- **Z-Axis**: Вместо цвета и размера приоритет отдается удаленности от пользователя.
- **Occlusion**: Эффекты перекрытия и размытия (Frosted Glass) для передачи контекста.
- **Translucency**: Панели адаптируются под освещение окружающей среды (Lattice environment).

### 2.2. Эргономика Пространства
- **Text Readability**: Текст размещается на расстоянии 1.5–2.0м от виртуальной камеры.
- **Gaze-based Interaction**: Компоненты имеют "Hover" состояние, активирующееся взглядом (Eye-tracking focus).
- **Safe Zone**: Все критические UI-элементы располагаются в поле зрения $60^\circ$.

---

## 3. AI-Native Workflow: Generative UI
Дизайн-система спроектирована так, чтобы AI-агенты могли не только использовать её, но и изменять.

### 3.1. Реактивные Дизайн-Токены (Reactive Tokens)
Токены — это "контракт" между человеком и AI.
- **Machine-Readable**: Все токены хранятся в JSON/Markdown (DTCG standard 2026).
- **Dynamic Theming**: AI автоматически генерирует цветовые пары и проверяет контраст (WCAG 2.2) в реальном времени.

### 3.2. Компоненты как Логические Блоки
Вместо статичных ассетов мы используем "Prompt Libraries":
- **Declarative Assembly**: AI собирает интерфейс из реестра атомарных компонентов на лету.
- **Editor State**: Всегда существует режим "Черновика" (Human-in-the-loop), где Суверен одобряет сгенерированный агентом UI.

---

## 4. Технический Стек (The Grid)
- **Core Rendering**: WGPU (через Rust-Wasm) для высокопроизводительных 3D-компонентов.
- **Reactive UI**: SolidJS для быстрой 2D-логики и интеграции с DOM.
- **Documentation**: Storybook v9.0 с поддержкой Wasm-модулей.
-   **Isolation**: SFI (Wasm) для изоляции сторонних виджетов.

---

## 5. Модель Рендеринга (Hybrid Rendering)
Для достижения баланса между скоростью и качеством текста в tLOS применяется гибридная стратегия:
-   **Canvas (WGPU/Rust)**: Для быстрых, массовых графических элементов (виджеты, связи, шейдерные эффекты "ржавчины/сияния"). Рисуется напрямую на GPU.
-   **DOM Overlay (HTML/SolidJS)**: Для сложного форматированного текста и форм, использующих нативный рендеринг браузера. Синхронизируется с позицией на Canvas с точностью до пикселя.

---
*Дизайн tLOS — это не картинка, а живая математика пространства и намерений.*
