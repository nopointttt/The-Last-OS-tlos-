# Technical Standards: Zero-Web2 Architectural Integrity

Этот документ устанавливает жесткие технические ограничения для обеспечения чистоты архитектуры **The Last OS**. Любое отклонение от этих правил считается архитектурным долгом и подлежит немедленному рефакторингу.

---

## 1. Запрещенные технологии (Banned List)

**Категорически запрещено** использование следующих протоколов и инструментов для внутренней логики ОС и взаимодействия акторов:

-   **Протоколы**: HTTP/1.1, HTTP/2, HTTPS, WebSockets, gRPC (legacy), REST, SOAP.
-   **Библиотеки (Rust)**: `axum`, `actix`, `warp`, `reqwest`, `hyper`, `tokio-tungstenite`.
-   **Библиотеки (JS/TS)**: `axios`, `fetch` (native), `socket.io`.
-   **Методологические антипаттерны**: Любые архитектуры, полагающиеся на централизованные URL-адреса (например, `example.com/api/v1/resource`).

---

## 2. Разрешенные технологии (Sovereign List)

Все взаимодействие должно осуществляться через следующие механизмы:

-   **Interface Level**: WebAssembly Interface Types (WIT).
-   **Transport Level**: wRPC (WIT-over-RPC).
-   **Message Bus**: NATS (через провайдеры wasmCloud).
-   **Addressing**: Пространственное индексирование (Quadtree/Octree) и контентная адресация (CID/IPFS).
-   **Identity**: Decentralized Identifiers (DID) и Verifiable Credentials.

---

## 3. Код-стайл и Паттерны

### 3.1. Актёры (Actors)
-   Акторы НЕ должны содержать `wasi:http` в своих `world.wit`, если только они не являются специализированными мостами в legacy-интернет.
-   Экспорт функций осуществляется ТОЛЬКО через кастомные WIT-интерфейсы в пространстве имен `tlos:*`.

### 3.2. Фронтенд (Shell)
-   Взаимодействие с ядром и сеткой (Grid) происходит через сгенерированные WIT-биндинги (wasmCloud SDK).
-   Запрещено использование `window.location`, `URLSearchParams` и других браузерных API для управления состоянием системы. Состояние должно быть пространственным (Spatial) или привязанным к Суверену.

### 3.3. Тестирование
-   Тесты должны имитировать среду Lattice/Grid, а не использовать локальные HTTP-серверы.

---

## 4. Исключения (Bridges)

Использование legacy-протоколов разрешено ТОЛЬКО в специализированных акторах-мостах (`tlos:bridge/*`), предназначенных для взаимодействия с внешним миром (например, получение данных из Web2 API). Эти мосты должны рассматриваться как "грязные" зоны и быть максимально изолированы.
